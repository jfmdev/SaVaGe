/*
 * Copyright (C) 2015 Jose F. Maldonado
 * This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0. 
 * If a copy of the MPL was not distributed with this file, You can obtain one at http://mozilla.org/MPL/2.0/.
 */
"object"!=typeof SaVaGe&&(SaVaGe={}),SaVaGe.ProgressPieChart=function(e){"object"!=typeof e&&(e={}),"string"!=typeof e.container&&(e.container="body"),"number"!=typeof e.value?e.value=.6:(e.value<0&&(e.value=0),e.value>1&&(e.value=1)),"number"!=typeof e.radius&&(e.radius=25),"number"!=typeof e.innerRadius&&(e.innerRadius=0),"number"!=typeof e.rotate&&(e.rotate=0),"object"!=typeof e.label&&(e.label={}),"boolean"!=typeof e.label.show&&(e.label.show=!1),"string"!=typeof e.label.text&&(e.label.text=parseInt(100*e.value,10)+"%"),"string"!=typeof e.label.size&&(e.label.size="12px"),"string"!=typeof e.label.color&&(e.label.color="black"),"string"!=typeof e.label.family&&(e.label.family="Arial Black"),"object"!=typeof e.colors&&(e.colors={}),void 0===e.colors.completed&&(e.colors.completed="#080"),void 0===e.colors.pending&&(e.colors.pending="#E65F00");var t=d3.select(e.container).append("svg").attr("width",2*e.radius).attr("height",2*e.radius),a=d3.svg.arc().outerRadius(e.radius);e.innerRadius>0&&a.innerRadius(e.innerRadius);var r=[100-100*e.value,100*e.value],l=d3.layout.pie(),o=t.selectAll("g.arc").data(l(r)).enter().append("g").attr("class","arc").attr("transform","translate("+e.radius+", "+e.radius+")");o.append("path").attr("fill",function(t,a){return 1===a?e.colors.completed:e.colors.pending}).attr("d",a).attr("transform","rotate("+e.rotate+")"),e.label.show&&t.append("text").attr("x",e.radius).attr("y",e.radius).attr("dy",".35em").attr("font-family",e.label.family).attr("font-size",e.label.size).attr("fill",e.label.color).style("text-anchor","middle").text(e.label.text);var i={svg:t,remove:function(){t.remove()}};return i};