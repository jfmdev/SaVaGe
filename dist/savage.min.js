/*! SaVaGe 1.0 | (c) 2015 Jose F. Maldonado | LGPL license */
"object"!=typeof SaVaGe&&(SaVaGe={}),SaVaGe.ToggleSwitch=function(t){"object"!=typeof t&&(t={}),"string"!=typeof t.container&&(t.container="body"),"boolean"!=typeof t.value&&(t.value=!1),"number"!=typeof t.height&&(t.height=50),("number"!=typeof t.width||t.width<t.height)&&(t.width=parseInt(1.6*t.height,10)),"number"!=typeof t.radius&&(t.radius=t.height/2-4),"number"!=typeof t.duration&&(t.duration=250),"object"!=typeof t.colors&&(t.colors={}),void 0===t.colors.backLeft&&(t.colors.backLeft="lightgray"),void 0===t.colors.foreLeft&&(t.colors.foreLeft="white"),void 0===t.colors.backRight&&(t.colors.backRight="#88f"),void 0===t.colors.foreRight&&(t.colors.foreRight="white");var e=t.value,r=t.height,o=t.width,a=0,i=0;2*t.radius>t.height&&(r=2*t.radius,o=parseInt(t.width+(2*t.radius-t.height),10),a=parseInt((o-t.width)/2,10),i=parseInt((o-t.width)/2,10));var s=d3.select(t.container).append("svg").attr("width",o).attr("height",r).style("cursor","pointer"),l=s.append("rect").attr("x",a).attr("y",i).attr("rx",t.height/2).attr("ry",t.height/2).style("fill",e?t.colors.backRight:t.colors.backLeft).attr("width",t.width).attr("height",t.height),n=s.append("circle").attr("cx",(e?t.width-t.height/2:t.height/2)+a).attr("cy",t.height/2+i).attr("r",t.radius).style("fill",e?t.colors.foreRight:t.colors.foreLeft),d=function(r){e=r,n.transition().duration(t.duration).attr("cx",(e?t.width-t.height/2:t.height/2)+a).style("fill",e?t.colors.foreRight:t.colors.foreLeft),l.transition().duration(t.duration).style("fill",e?t.colors.backRight:t.colors.backLeft)},c={svg:s,getValue:function(){return e},setValue:d,remove:function(){s.remove()}};return s.on("click",function(){d(!e),"function"==typeof t.onChange&&t.onChange(c)}),c},SaVaGe.ProgressPieChart=function(t){"object"!=typeof t&&(t={}),"string"!=typeof t.container&&(t.container="body"),"number"!=typeof t.value?t.value=.6:(t.value<0&&(t.value=0),t.value>1&&(t.value=1)),"number"!=typeof t.radius&&(t.radius=25),"number"!=typeof t.innerRadius&&(t.innerRadius=0),"number"!=typeof t.rotate&&(t.rotate=0),"object"!=typeof t.label&&(t.label={}),"boolean"!=typeof t.label.show&&(t.label.show=!1),"string"!=typeof t.label.text&&(t.label.text=parseInt(100*t.value,10)+"%"),"string"!=typeof t.label.size&&(t.label.size="12px"),"string"!=typeof t.label.color&&(t.label.color="black"),"string"!=typeof t.label.family&&(t.label.family="Arial Black"),"object"!=typeof t.colors&&(t.colors={}),void 0===t.colors.completed&&(t.colors.completed="#080"),void 0===t.colors.pending&&(t.colors.pending="#E65F00");var e=d3.select(t.container).append("svg").attr("width",2*t.radius).attr("height",2*t.radius),r=d3.svg.arc().outerRadius(t.radius);t.innerRadius>0&&r.innerRadius(t.innerRadius);var o=[100-100*t.value,100*t.value],a=d3.layout.pie(),i=e.selectAll("g.arc").data(a(o)).enter().append("g").attr("class","arc").attr("transform","translate("+t.radius+", "+t.radius+")");i.append("path").attr("fill",function(e,r){return 1===r?t.colors.completed:t.colors.pending}).attr("d",r).attr("transform","rotate("+t.rotate+")"),t.label.show&&e.append("text").attr("x",t.radius).attr("y",t.radius).attr("dy",".35em").attr("font-family",t.label.family).attr("font-size",t.label.size).attr("fill",t.label.color).style("text-anchor","middle").text(t.label.text);var s={svg:e,remove:function(){e.remove()}};return s},SaVaGe.CheckBox=function(t){"object"!=typeof t&&(t={}),"string"!=typeof t.container&&(t.container="body"),"number"!=typeof t.size&&(t.size=25),"object"!=typeof t.border&&(t.border={}),"number"!=typeof t.border.radius&&(t.border.radius=0),"number"!=typeof t.border.width&&(t.border.width=1),"boolean"!=typeof t.tristate&&(t.tristate=!1),"object"!=typeof t.marks&&(t.marks={}),"string"!=typeof t.marks.unchecked&&(t.marks.unchecked="empty"),"string"!=typeof t.marks.checked&&(t.marks.checked="tick"),"string"!=typeof t.marks.cancelled&&(t.marks.cancelled="cross"),"object"!=typeof t.colors&&(t.colors={}),"undefined"==typeof t.colors.back&&(t.colors.back="white"),"undefined"==typeof t.colors.border&&(t.colors.border="black"),"undefined"==typeof t.colors.tick&&(t.colors.tick="black"),"undefined"==typeof t.colors.cross&&(t.colors.cross="black"),"undefined"==typeof t.colors.fill&&(t.colors.fill="black");var e=0,r=d3.select(t.container).append("svg").attr("width",t.size+2*t.border.width).attr("height",t.size+2*t.border.width).style("cursor","pointer"),o=(r.append("rect").attr("x",t.border.width).attr("y",t.border.width).attr("rx",t.border.radius).attr("ry",t.border.radius).style("fill",t.colors.back).style("stroke",t.colors.border).style("stroke-width",t.border.width).attr("width",t.size).attr("height",t.size),null),a=function(a){e=t.tristate?a%3:a%2,null!==o&&o.remove();var i=null;if(i=0===e?t.marks.unchecked:1===e?t.marks.checked:t.marks.cancelled,"empty"===i)o=null;else if("tick"===i){var s=parseInt(t.size/5,10);2>s&&(s=2);var l=d3.svg.line().x(function(t){return t.x}).y(function(t){return t.y}).interpolate("linear"),n=[{x:t.border.width+t.size-s/2,y:t.border.width+s/2},{x:t.border.width+parseInt(t.size/3),y:t.border.width+t.size-s/1.4},{x:t.border.width+s/2,y:t.border.width+parseInt(2*t.size/3)}];o=r.append("path").attr("d",l(n)).attr("stroke",t.colors.tick).attr("stroke-width",s).attr("fill","none")}else if("cross"===i){var s=parseInt(t.size/5,10);2>s&&(s=2),o=r.append("g"),o.append("line").attr("x1",t.border.width+s/2).attr("y1",t.border.width+s/2).attr("x2",t.border.width+t.size-s/2).attr("y2",t.border.width+t.size-s/2).style("stroke",t.colors.cross).style("stroke-width",s),o.append("line").attr("x1",t.border.width+t.size-s/2).attr("y1",t.border.width+s/2).attr("x2",t.border.width+s/2).attr("y2",t.border.width+t.size-s/2).style("stroke",t.colors.cross).style("stroke-width",s)}else if("fill"===i){var d=parseInt(t.size/10,10);1>d&&(d=1),o=r.append("rect").attr("x",t.border.width+d).attr("y",t.border.width+d).attr("rx",t.border.radius).attr("ry",t.border.radius).style("fill",t.colors.fill).attr("width",t.size-2*d).attr("height",t.size-2*d)}},i={svg:r,getValue:function(){return e},setValue:a,remove:function(){r.remove()}};return r.on("click",function(){a(e+1),"function"==typeof t.onChange&&t.onChange(i)}),i};